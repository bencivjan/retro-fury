// =============================================================================
// level4.js - "Sabotage" (Command Center) for RETRO FURY
// =============================================================================
// A 48x48 tile map representing a large command center complex. Three reactor
// rooms are in different areas, connected by central corridors. Each reactor
// room has space for combat during the planting phase. Brutes guard reactors.
//
// Theme: tech panels (texture 5), concrete (texture 2)
// Enemies: 20+ (all types including Brutes)
// Items: Plasma Rifle pickup, heavy ammo, health stations
// Objectives: 3 plant objectives (reactor nodes)
// Par time: 360 seconds
// =============================================================================

// Legend:
//   0 = empty / walkable
//   2 = concrete wall
//   5 = tech panel wall
//   6 = crate
//   9 = unlocked door
//  11 = red-locked door

const level4 = {
    name: 'Sabotage',

    briefing:
        'MISSION 4: SABOTAGE\n\n' +
        'PLANT EXPLOSIVES AT 3 REACTOR NODES.\n' +
        'HOLD [E] TO ARM EACH CHARGE.\n' +
        'EXPECT HEAVY RESISTANCE.\n\n' +
        'WARNING: BRUTES DETECTED - HEAVY ARMOR, MINIGUN.',

    // 48x48 tile map. Three reactor rooms in a large complex.
    map: [
        // Row 0
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
        // Row 1 - North reactor room
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 2
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 3
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 4
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,5,0,0,0,0,0,0,0,0,5,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 5
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 6  - reactor 1 core
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 7
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,5,0,0,0,0,0,0,0,0,5,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 8
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 9
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,5,5,5,5,5,5,5,9,5,5,5,5,5,5,5,5,5,5,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 10
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 11
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 12
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 13
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 14
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 15
        [2,2,2,2,2,2,9,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,9,2,2,2,2,2],
        // Row 16  - west and east corridors
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 17
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 18
        [2,2,2,2,2,2,9,2,2,2,2,2,2,2,2,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,2,2,2,2,2,2,2,2,9,2,2,2,2,2],
        // Row 19  - west reactor approach              east reactor approach
        [5,5,5,5,5,5,0,5,5,5,5,5,5,5,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,5,5,5,5,5,5,0,5,5,5,5,5],
        // Row 20 - west reactor room
        [5,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,5],
        // Row 21
        [5,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,5],
        // Row 22
        [5,0,0,0,5,0,0,0,0,5,0,0,0,5,2,0,0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0,0,0,2,5,0,0,0,5,0,0,0,0,5,0,0,5],
        // Row 23  - reactor 2 core (west)          center corridor         reactor 3 core (east)
        [5,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,5],
        // Row 24
        [5,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,5],
        // Row 25
        [5,0,0,0,5,0,0,0,0,5,0,0,0,5,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,5,0,0,0,5,0,0,0,0,5,0,0,5],
        // Row 26
        [5,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,5],
        // Row 27
        [5,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,2,2,2,9,2,2,2,2,0,0,0,0,0,0,2,5,0,0,0,0,0,0,0,0,0,0,0,5],
        // Row 28
        [5,5,5,5,5,5,0,5,5,5,5,5,5,5,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,5,5,5,5,5,5,0,5,5,5,5,5],
        // Row 29
        [2,2,2,2,2,2,9,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,9,2,2,2,2,2],
        // Row 30
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 31
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 32
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,9,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 33  - south section / armory area
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 34
        [2,0,0,6,0,0,6,0,0,6,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,6,0,0,6,0,0,6,0,2],
        // Row 35
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 36
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,6,0,0,0,0,0,0,6,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 37
        [2,0,0,6,0,0,6,0,0,6,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,6,0,0,6,0,0,6,0,2],
        // Row 38
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 39
        [2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,2],
        // Row 40
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
        // Row 41  - south corridor to start
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
        // Row 42
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
        // Row 43
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
        // Row 44  - start area
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
        // Row 45
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
        // Row 46
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
        // Row 47
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
    ],

    // Player starts in the south area, facing north.
    playerStart: { x: 23.5, y: 45.5, angle: -Math.PI / 2 },

    // 22 enemies: all types including Brutes (introduced here).
    enemies: [
        // Start area / south approach
        { type: 'grunt',   x: 20.5, y: 43.5 },
        { type: 'grunt',   x: 26.5, y: 43.5 },
        { type: 'soldier', x: 23.5, y: 39.5 },
        // South storage areas
        { type: 'grunt',   x: 5.5,  y: 35.5 },
        { type: 'soldier', x: 10.5, y: 33.5 },
        { type: 'grunt',   x: 42.5, y: 35.5 },
        { type: 'soldier', x: 38.5, y: 33.5 },
        // Central corridors
        { type: 'soldier', x: 23.5, y: 31.5 },
        { type: 'scout',   x: 10.5, y: 16.5 },
        { type: 'scout',   x: 38.5, y: 16.5 },
        { type: 'grunt',   x: 23.5, y: 19.5 },
        { type: 'grunt',   x: 23.5, y: 14.5 },
        // West reactor room - Brute guards
        { type: 'brute',   x: 7.5,  y: 23.5 },
        { type: 'soldier', x: 3.5,  y: 20.5 },
        { type: 'grunt',   x: 10.5, y: 26.5 },
        // East reactor room - Brute guards
        { type: 'brute',   x: 42.5, y: 23.5 },
        { type: 'soldier', x: 44.5, y: 20.5 },
        { type: 'grunt',   x: 38.5, y: 26.5 },
        // North reactor room - Brute guard
        { type: 'brute',   x: 24.5, y: 5.5 },
        { type: 'soldier', x: 20.5, y: 3.5 },
        { type: 'soldier', x: 28.5, y: 3.5 },
        { type: 'scout',   x: 24.5, y: 8.5 },
    ],

    // Items: Plasma Rifle, heavy ammo, health.
    items: [
        // Plasma Rifle in the central area (near the center corridor)
        { type: 'WEAPON_PLASMA', x: 23.5, y: 24.5 },
        // Reactor plant objectives (objective items at reactor cores)
        { type: 'OBJECTIVE_ITEM', x: 24.5, y: 5.5 },   // North reactor
        { type: 'OBJECTIVE_ITEM', x: 7.5,  y: 23.5 },   // West reactor
        { type: 'OBJECTIVE_ITEM', x: 42.5, y: 23.5 },   // East reactor
        // Health in strategic locations
        { type: 'HEALTH_LARGE', x: 23.5, y: 36.5 },  // South approach
        { type: 'HEALTH_LARGE', x: 7.5,  y: 11.5 },  // Near west path
        { type: 'HEALTH_LARGE', x: 42.5, y: 11.5 },  // Near east path
        { type: 'HEALTH_SMALL', x: 3.5,  y: 16.5 },
        { type: 'HEALTH_SMALL', x: 44.5, y: 16.5 },
        { type: 'HEALTH_SMALL', x: 20.5, y: 16.5 },
        { type: 'HEALTH_SMALL', x: 27.5, y: 16.5 },
        { type: 'HEALTH_LARGE', x: 23.5, y: 11.5 },
        // Heavy ammo
        { type: 'AMMO_CELLS',    x: 23.5, y: 30.5 },
        { type: 'AMMO_CELLS',    x: 7.5,  y: 16.5 },
        { type: 'AMMO_CELLS',    x: 42.5, y: 16.5 },
        { type: 'AMMO_ROCKETS',  x: 5.5,  y: 34.5 },
        { type: 'AMMO_ROCKETS',  x: 43.5, y: 34.5 },
        { type: 'AMMO_SHELLS',   x: 17.5, y: 36.5 },
        { type: 'AMMO_BULLETS',  x: 30.5, y: 36.5 },
        // Armor
        { type: 'ARMOR', x: 23.5, y: 23.5 },
        { type: 'ARMOR', x: 7.5,  y: 30.5 },
        { type: 'ARMOR', x: 42.5, y: 30.5 },
    ],

    // Three plant objectives (reactor nodes).
    objectives: [
        {
            type: 'plant',
            x: 24.5,
            y: 5.5,
            description: 'PLANT CHARGE AT REACTOR ALPHA (NORTH)',
        },
        {
            type: 'plant',
            x: 7.5,
            y: 23.5,
            description: 'PLANT CHARGE AT REACTOR BETA (WEST)',
        },
        {
            type: 'plant',
            x: 42.5,
            y: 23.5,
            description: 'PLANT CHARGE AT REACTOR GAMMA (EAST)',
        },
    ],

    // Exit at the south start area after all reactors are sabotaged.
    exitTrigger: { x: 23.5, y: 45.5, requiredObjectives: 3 },

    palette: {
        ceiling: '#0a0a2a',
        floor:   '#1a1a3a',
        fog:     '#050520',
    },

    parTime: 360,

    hints: [
        {
            trigger: 'time',
            delay: 30,
            text: 'HOLD [E] AT REACTOR NODES TO ARM CHARGES',
        },
        {
            trigger: 'time',
            delay: 120,
            text: 'REACTORS ARE IN THE NORTH, WEST, AND EAST WINGS',
        },
        {
            trigger: 'time',
            delay: 240,
            text: 'WATCH OUT FOR BRUTES GUARDING THE REACTORS',
        },
    ],
};

export default level4;
