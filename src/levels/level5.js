// =============================================================================
// level5.js - "Showdown" (The Stronghold) for RETRO FURY
// =============================================================================
// A 48x48 tile map with two sections: a corridor gauntlet (south half) leading
// to a large boss arena (north half, ~16x16 open area). The arena has pillars
// for cover and health pickups along the edges. The Commander boss awaits in
// the center of the arena.
//
// Theme: brick (texture 1), prison metal (texture 4) for industrial fortress
// Enemies: 10-12 mixed in corridors + Commander boss in arena
// Items: All ammo types, health/armor before boss room, health along arena
// Objectives: 1 boss objective (defeat the Commander)
// Par time: 480 seconds
// Extra: bossSpawnPoints for grunt summoning during boss fight
// =============================================================================

// Legend:
//   0 = empty / walkable
//   1 = brick wall
//   2 = concrete wall
//   4 = prison metal / industrial
//   5 = tech panel
//   6 = crate
//   9 = unlocked door

const level5 = {
    name: 'Showdown',

    briefing:
        'MISSION 5: SHOWDOWN\n\n' +
        'THE COMMANDER AWAITS IN THE CENTRAL ARENA.\n' +
        'FIGHT THROUGH THE STRONGHOLD.\n' +
        'END THIS.\n\n' +
        'THIS IS THE FINAL MISSION. GOOD LUCK.',

    // 48x48 tile map. South half: corridors. North half: boss arena.
    map: [
        // Row 0  (north wall)
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 1  - arena north edge
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 2
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 3
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 4  - arena with pillars
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 5
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 6
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 7  - arena center area
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 8  - boss center
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 9
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 10
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 11
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 12
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 13
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 14  - arena south edge / arena entrance
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 15
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,9,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 16  - pre-boss supply room
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 17
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 18
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,6,0,0,6,0,0,0,0,6,0,0,6,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 19
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 20
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,9,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 21  - corridor section starts here
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 22  - wide corridor, east-west branches
        [4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4],
        // Row 23
        [4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4],
        // Row 24
        [4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,0,0,0,4,4,4,4,4,4,4,4,4,4],
        // Row 25  - east side room
        [4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,0,0,0,4,4,4,4,4,4,4,4,4,4],
        // Row 26  - west side room
        [4,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,0,0,0,4,4,4,4,4,4,4,4,4,4],
        // Row 27
        [4,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,4],
        // Row 28
        [4,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,4],
        // Row 29
        [4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4],
        // Row 30
        [4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4],
        // Row 31
        [4,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,4],
        // Row 32
        [4,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,4],
        // Row 33
        [4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,0,0,0,4,4,4,4,4,4,4,4,4,4],
        // Row 34
        [4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,0,0,0,4,4,4,4,4,4,4,4,4,4],
        // Row 35
        [4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4],
        // Row 36
        [4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4],
        // Row 37
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 38
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 39
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 40
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 41
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 42
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 43
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 44
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 45  - spawn
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 46
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
        // Row 47  (south wall)
        [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],
    ],

    // Player starts in the south entrance, facing north.
    playerStart: { x: 23.5, y: 45.5, angle: -Math.PI / 2 },

    // 12 mixed enemies in corridors + Commander in arena.
    enemies: [
        // Start area
        { type: 'grunt',   x: 20.5, y: 42.5 },
        { type: 'grunt',   x: 27.5, y: 42.5 },
        // First corridor junction
        { type: 'soldier', x: 23.5, y: 36.5 },
        { type: 'scout',   x: 18.5, y: 35.5 },
        // West side room
        { type: 'soldier', x: 6.5,  y: 29.5 },
        { type: 'grunt',   x: 5.5,  y: 27.5 },
        // East side room
        { type: 'soldier', x: 40.5, y: 29.5 },
        { type: 'scout',   x: 42.5, y: 27.5 },
        // Corridor leading to pre-boss room
        { type: 'grunt',   x: 23.5, y: 23.5 },
        { type: 'soldier', x: 20.5, y: 22.5 },
        // Pre-boss room guards
        { type: 'brute',   x: 23.5, y: 17.5 },
        { type: 'scout',   x: 28.5, y: 17.5 },
        // COMMANDER BOSS in the arena center
        { type: 'commander', x: 24.5, y: 8.5 },
    ],

    // Generous items before the boss fight.
    items: [
        // Start area supplies
        { type: 'HEALTH_SMALL',  x: 18.5, y: 44.5 },
        { type: 'AMMO_BULLETS',  x: 28.5, y: 44.5 },
        // West side room stash
        { type: 'HEALTH_LARGE',  x: 4.5,  y: 28.5 },
        { type: 'AMMO_SHELLS',   x: 8.5,  y: 28.5 },
        { type: 'AMMO_ROCKETS',  x: 6.5,  y: 26.5 },
        // East side room stash
        { type: 'HEALTH_LARGE',  x: 43.5, y: 28.5 },
        { type: 'AMMO_CELLS',    x: 39.5, y: 28.5 },
        { type: 'AMMO_ROCKETS',  x: 36.5, y: 27.5 },
        // Corridor items
        { type: 'HEALTH_SMALL',  x: 14.5, y: 35.5 },
        { type: 'HEALTH_SMALL',  x: 32.5, y: 35.5 },
        { type: 'AMMO_BULLETS',  x: 23.5, y: 29.5 },
        // Pre-boss supply room - generous drops
        { type: 'HEALTH_LARGE',  x: 18.5, y: 17.5 },
        { type: 'HEALTH_LARGE',  x: 29.5, y: 17.5 },
        { type: 'ARMOR',         x: 23.5, y: 19.5 },
        { type: 'AMMO_SHELLS',   x: 19.5, y: 18.5 },
        { type: 'AMMO_ROCKETS',  x: 27.5, y: 18.5 },
        { type: 'AMMO_CELLS',    x: 23.5, y: 16.5 },
        { type: 'AMMO_BULLETS',  x: 20.5, y: 16.5 },
        // Arena edge health pickups (for during the fight)
        { type: 'HEALTH_LARGE',  x: 16.5, y: 2.5 },
        { type: 'HEALTH_LARGE',  x: 32.5, y: 2.5 },
        { type: 'HEALTH_SMALL',  x: 16.5, y: 8.5 },
        { type: 'HEALTH_SMALL',  x: 32.5, y: 8.5 },
        { type: 'HEALTH_SMALL',  x: 16.5, y: 13.5 },
        { type: 'HEALTH_SMALL',  x: 32.5, y: 13.5 },
        // Ammo in arena corners
        { type: 'AMMO_CELLS',    x: 16.5, y: 5.5 },
        { type: 'AMMO_ROCKETS',  x: 32.5, y: 5.5 },
        { type: 'AMMO_SHELLS',   x: 16.5, y: 11.5 },
        { type: 'AMMO_BULLETS',  x: 32.5, y: 11.5 },
    ],

    // Single objective: defeat the Commander.
    objectives: [
        {
            type: 'boss',
            x: 24.5,
            y: 8.5,
            description: 'DEFEAT THE COMMANDER',
        },
    ],

    // Exit triggers when the boss is dead.
    exitTrigger: { x: 24.5, y: 8.5, requiredObjectives: 1 },

    palette: {
        ceiling: '#0a0505',
        floor:   '#1a1010',
        fog:     '#050000',
    },

    parTime: 480,

    hints: [
        {
            trigger: 'time',
            delay: 30,
            text: 'THE COMMANDER AWAITS IN THE CENTRAL ARENA',
        },
        {
            trigger: 'time',
            delay: 120,
            text: 'STOCK UP ON SUPPLIES BEFORE ENTERING THE ARENA',
        },
        {
            trigger: 'time',
            delay: 300,
            text: 'USE THE PILLARS IN THE ARENA FOR COVER',
        },
    ],

    // Spawn points for grunts summoned by the Commander during the boss fight.
    bossSpawnPoints: [
        { x: 16.5, y: 3.5 },
        { x: 32.5, y: 3.5 },
        { x: 16.5, y: 13.5 },
        { x: 32.5, y: 13.5 },
        { x: 20.5, y: 6.5 },
        { x: 28.5, y: 10.5 },
    ],
};

export default level5;
